<template>
  <require from="bootstrap.css"></require>
  <require from="styles.css"></require>
  <!-- Navigation -->
  <nav class="navbar navbar-light bg-light static-top">
    <div class="container">
      <a class="navbar-brand" href="#">CSC 635 Aureilia App</a>
    </div>
  </nav>

  <div class="container">
    <div class="row"> 
      <div class="col text-center top-100">
        <h1>CSC 685 Aureilia Notes</h1>
      </div>
    </div>
    <div class="row">
        <div  if.bind="loadingNotes" class="col top-100">
          <div class="loader"></div>
        </div>
        <div if.bind="!loadingNotes && notes.length === 0" class="col text-center top-100">
            <div class="alert alert-danger">${emptyNotes}</div>
        </div>
        <div if.bind="!loadingNotes && notes.length > 0" class="container table-container">
            <div class="col-md-10 offset-md-1">
                <div class="row">
                        <table class="table table-striped table-condensed">
                                <thead>
                                <tr>
                                    <th>Id</th>
                                    <th>Title</th>
                                    <th>Note</th>
                                    <th>Added By</th> 
                                    <th>Date Added</th>  
                                    <th>Category</th>                                     
                                </tr>
                            </thead>   
                            <tbody>
                                <tr repeat.for="n of notes">
                                    <td>
                                        ${n.id}
                                    </td>
                                    <td>
                                        ${n.title}
                                    </td>
                                    <td>
                                        ${n.note}
                                    </td>
                                    <td>
                                        ${n.user.name}
                                    </td> 
                                    <td>
                                        ${n.createdOn}
                                    </td>  
                                    <td>
                                        ${n.category.name}
                                    </td>                  
                                </tr>                                  
                            </tbody>
                        </table>
                </div>
            </div>
        </div>
    </div>
  </div>

  <div class="container">
    <form role="form" submit.delegate="addNewNote()">
        <div class="form-group text-center top-25">
          <div class="container">
              <div class="alert alert-danger col-md-4 offset-md-4" if.bind="submitError">
                  ${submitError}
                </div>
                <div class="alert alert-danger col-md-4 offset-md-4" if.bind="submitSuccess">
                  ${submitSuccess}
                </div>
          </div>
          <div class="container">
                <input type="text" value.bind="noteTitle"  name="title" id="title" class="form-control input-sm col-md-4 offset-md-4" placeholder="Title">
                <br />
                <input type="text" value.bind="noteNote" name="note" id="note" class="form-control input-sm col-md-4 offset-md-4"  placeholder="Note">
                <br />
            </div>
            <button type="submit"  disabled.bind="submitted" class="btn btn-success form-control input-sm col-md-4">Add New Note</button>
          </div>
      </form>
  </div>
    

  <footer class="footer">
      <div class="container">
        <span class="text-muted text-center">${year} Created by Brock Tubre</span>
      </div>
  </footer>

</template>
